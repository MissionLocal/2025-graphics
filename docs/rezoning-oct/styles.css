/* ========== Base ========== */
body{margin:0;padding:0 0 20px 0;font-family:'Barlow',sans-serif}

/* ========== Layout ========== */
.cont{display:flex;justify-content:center;align-items:center}
.map-container{position:relative;width:100vw;max-width:400px;margin:10px auto}
.map{width:100vw;max-width:400px;height:500px;box-shadow:0 4px 8px rgba(0,0,0,.1)}

/* (Old) pills — keep only if you use them elsewhere */
.btns{display:flex;gap:6px;flex-wrap:wrap;margin:0 0 8px 0;justify-content:center}
.btn{appearance:none;border:1px solid #ddd;background:#fff;color:#333;padding:6px 10px;border-radius:999px;cursor:pointer;font-weight:600;font-size:12.5px}
.btn:hover{background:#f3f3f3}
.btn.active{background:#9DF4D9;color:#fff;border-color:#9DF4D9}

/* ========== Stacked Map UI (dropdown + legend) ========== */
.map-ui{position:absolute;top:8px;left:8px;right:8px;display:flex;flex-direction:column;gap:8px;z-index:5}
.controls-row{display:flex;align-items:center;gap:10px;align-self:flex-start;background:#fff;border-radius:999px;border:1px solid #ddd;padding:6px 10px;box-shadow:0 1px 2px rgba(0,0,0,.06)}
.controls-row label{font:500 14px/1.2 Barlow,sans-serif;color:#223}
.controls-row select{border:0;outline:0;background:transparent;font:500 14px Barlow,sans-serif}

/* Legend card (static inside .map-ui) */
.legend{position:static;align-self:flex-start;max-width:280px;background:rgba(255,255,255,.95);border:1px solid #ddd;border-radius:8px;padding:8px 10px;box-shadow:0 1px 2px rgba(0,0,0,.06);font-size:11.5px;line-height:1.1;pointer-events:none}
.legend-title{font:600 12px/1.2 Barlow,sans-serif;color:#222;margin-bottom:4px}
.legend-row{display:flex;gap:3px;flex-wrap:wrap}
.legend-swatch{display:inline-block;width:10px;height:10px;border-radius:2px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.1)}
.legend-gradient{height:10px;border-radius:6px}
.legend-ends{display:flex;justify-content:space-between;margin-top:4px;width:100%;color:#222}
.legend-ends span{font-weight:400;color:#555} /* numbers not bold */

/* Keep Mapbox controls below our UI */
.mapboxgl-ctrl-top-right{z-index:4}

/* ========== Info card (bottom centered) ========== */
.info-box{position:absolute;left:50%;transform:translateX(-50%);bottom:14px;z-index:2;width:calc(100% - 12px);max-width:460px;box-sizing:border-box;padding:8px 10px;background:rgba(255,255,255,.98);border-radius:2px;box-shadow:0 2px 4px rgba(0,0,0,.1);font-size:13px;line-height:1.35;max-height:40%;overflow-y:auto}
.info-box .info-stats{white-space:nowrap}

/* ========== Mobile & Tablet base tweaks ========== */
@media (max-width:768px){
  .map-container{max-width:400px}
  .map{height:500px}
  .info-box{width:calc(100% - 12px);max-width:460px}
}
@media (max-width:520px){
  .legend{max-width:none}
  .legend-title{font-size:11px}
  .legend-ends span{font-size:11px}
  .legend-gradient{height:8px}
}

/* Hide any old static legend wrapper if left in HTML */
.legend-container{display:none!important}

/* =========================================================
   Responsive map sizing (larger on desktop, fits screen on mobile)
   ========================================================= */

/* Default bump (small laptops / wide tablets) */
.map-container{max-width:900px}
.map{max-width:900px;height:600px}

/* Large desktop */
@media (min-width:1280px){
  .map-container{max-width:1100px}
  .map{max-width:1100px;height:700px}
}

/* Tablet-specific */
@media (min-width:768px) and (max-width:1023px){
  .map-container{max-width:720px}
  .map{max-width:720px;height:560px}
}

/* Mobile: inset the map with side padding and avoid 100vw overflow */
@media (max-width:767px){
  :root { --gutter: 5px; } /* tweak 12–20px to taste */

  .map-container{
    width:100%;
    max-width:none;
    padding-left:max(var(--gutter), env(safe-area-inset-left));
    padding-right:max(var(--gutter), env(safe-area-inset-right));
    box-sizing:border-box;
  }

  .map{
    width:100%;          /* fill padded container instead of 100vw */
    max-width:none;
    height:calc(100dvh - 120px); /* adjust if your header/footer changes */
    border-radius:10px;  /* optional nicety */
    overflow:hidden;     /* keep tiles inside the radius */
    box-shadow:0 4px 8px rgba(0,0,0,.1);
  }
}

/* Very small phones: a tad shorter to avoid clipping */
@media (max-width:380px){
  .map{height:calc(100dvh - 140px)}
}

/* Optional: if you kept the compass but want to hide +/- zoom
.mapboxgl-ctrl-zoom{display:none!important;}
*/
