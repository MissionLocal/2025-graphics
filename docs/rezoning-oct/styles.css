/* =========================
   Base
   ========================= */
   html, body { height: 100%; }
   body {
     margin: 0;
     padding: 0 0 20px 0;
     font-family: 'Barlow', sans-serif;
   }
   
   /* =========================
      Layout
      ========================= */
   .cont {
     display: flex;
     justify-content: center;
     align-items: stretch; /* prevent collapse on mobile */
   }
   
   /* Outer container around the map */
   .map-container {
     position: relative;
     width: 100%;
     max-width: 900px;
     margin: 10px auto;
     box-sizing: border-box;
   }
   
   #map { width: 100%; max-width: 500px; height: 500px; }
   .cont { align-items: center; } /* or flex-start; avoid anything that forces odd stretching */
   
   /* =========================
      Map UI (dropdown + legend)
      ========================= */
   .map-ui {
     position: absolute;
     top: 8px; left: 8px; right: 8px;
     display: flex;
     flex-direction: column;
     gap: 8px;
     z-index: 5;
   }
   
   .controls-row {
     display: flex; align-items: center; gap: 10px;
     align-self: flex-start;
     background: #fff; border-radius: 999px; border: 1px solid #ddd;
     padding: 6px 10px; box-shadow: 0 1px 2px rgba(0,0,0,.06);
   }
   .controls-row label { font: 500 14px/1.2 Barlow, sans-serif; color: #223; }
   .controls-row select { border: 0; outline: 0; background: transparent; font: 500 14px Barlow, sans-serif; }
   
   .legend {
     position: static;
     align-self: flex-start;
     max-width: 280px;
     background: rgba(255,255,255,.95);
     border: 1px solid #ddd;
     border-radius: 8px;
     padding: 8px 10px;
     box-shadow: 0 1px 2px rgba(0,0,0,.06);
     font-size: 11.5px; line-height: 1.1;
     pointer-events: none;
   }
   .legend-title { font: 600 12px/1.2 Barlow, sans-serif; color: #222; margin-bottom: 4px; }
   .legend-gradient { height: 10px; border-radius: 6px; }
   .legend-ends { display: flex; justify-content: space-between; margin-top: 4px; color: #222; }
   .legend-ends span { font-weight: 400; color: #555; }
   
   .mapboxgl-ctrl-top-right { z-index: 4; } /* keep Mapbox controls under our UI */
   
   /* =========================
      Info card
      ========================= */
   .info-box {
     position: absolute;
     left: 50%; transform: translateX(-50%);
     bottom: 14px;
     z-index: 2;
     width: calc(100% - 12px);
     max-width: 460px;
     box-sizing: border-box;
     padding: 8px 10px;
     background: rgba(255,255,255,.98);
     border-radius: 2px;
     box-shadow: 0 2px 4px rgba(0,0,0,.1);
     font-size: 13px; line-height: 1.35;
     max-height: 40%; overflow-y: auto;
     white-space: normal;
   }
   
   /* =========================
      Responsive sizes
      ========================= */
   
   /* Large desktop */
   @media (min-width: 1280px){
     .map-container { max-width: 1100px; }
     .map { height: 700px; }
   }
   
   /* Tablet */
   @media (min-width: 768px) and (max-width: 1279px){
     .map-container { max-width: 720px; }
     .map { height: 560px; }
   }
   
   /* ---------- Mobile: force fixed 300px height ---------- */
   @media (max-width: 767px){
     .map-container {
       width: 100%;
       max-width: none;
       margin: 8px auto;
       padding: 4px;            /* avoid 100vw overflow */
     }
     .map {
       width: 100% !important;
       max-width: none !important;
       height: 500px !important;     /* fixed height on phones */
       min-height: 500px !important; /* guard against collapse */
       border-radius: 10px;
     }
     .legend { max-width: none; }
     .legend-title { font-size: 11px; }
     .legend-ends span { font-size: 11px; }
     .legend-gradient { height: 8px; }
     .info-box { bottom: 8px; }
   }
   
   /* Very small phones (optional tiny nudge) */
   @media (max-width: 380px){
     .info-box { font-size: 12.5px; padding: 8px 9px; }
     .map-ui { gap: 6px; }
     .controls-row label, .controls-row select { font-size: 13px; }
   }
   